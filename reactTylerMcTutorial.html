<!DOCTYPE html>
<html>
<head>
	<title>
		React Practice: Friends List
	</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.6/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.6/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.js"></script>

</head>
	<body>

		<div id="app">
		    <!-- This element's contents will be replaced with your component. -->
		</div>


<script type="text/babel">

var MainContainer = React.createClass({
    getInitialState: function(){
      return {
        name: 'JK_MNO',
        friendsArray: [],
        friendsName: ''
      }
    },
    handleChange: function(e){
    	this.setState({
    		friendsName: e.target.value
    	});
    },
    handleSubmit: function(e){
      e.preventDefault();
      if(this.state.friendsName !== '') {
        var nextfriend = this.state.friendsArray.concat([{
          friendsName: this.state.friendsName, id: Date.now()
        }]);
        var nextText = '';
        this.setState({
          friendsArray: nextfriend, friendsName: nextText
        });
      }
    },
    handleDelete: function(e){
        var i = e.target.value;
        var friendsCopy = this.state.friendsArray;
        this.setState(state => {
            friendsCopy.splice(i, 1);
            friendsArray: friendsCopy
        });
    },
    handleSort: function(e){
        // console.log(e);
        var friendsCopy = this.state.friendsArray;
        // friendsCopy.sort(function(a,b) {
        //     return a-b
        //     console.log(friendsCopy);
        // });
        friendsCopy = sortBy(this.state.friendsArray, 'friendsName', function(n){
            return Math.sin(n);
        });
        // console.log(friendsCopy);
        // for (var s = 0; s < friendsCopy.length - 1; s++){
        //     // console.log(friendsCopy[s]);
        //     if(friendsCopy[s] > friendsCopy[s+1]){
        //         var temp = friendsCopy[s];
        //         friendsCopy[s] = friendsCopy[s+1];
        //         friendsCopy[s+1] = temp;
        //         // s = s-2;
        // console.log(s);
        //     }
        // }
        // console.log(friendsCopy);
    },
    render: function(){
      return (
        <div>
          <h3> Name: {this.state.name} </h3>
          <ShowList friendsArray={this.state.friendsArray} handleDelete={this.handleDelete} handleSort={this.handleSort} />
          <form onSubmit={this.handleSubmit} >
              Enter Friends: <input className="friendInput" onChange={this.handleChange} value={this.state.friendsName} />
            </form> 
        </div>
      );
    }
});

var ShowList = React.createClass({
  render: function() {
    var createFriend = function(friendArray, index) {
       return (
        <li key={friendArray.id}>{friendArray.friendsName} <button onClick={this.props.handleDelete} value={index}>Delete</button> </li>
      );
    };
    return <ul>{this.props.friendsArray.map(createFriend.bind(this))} <button onClick={this.props.handleSort}>Sort</button> </ul>;
  }
});

ReactDOM.render(<MainContainer />, document.getElementById('app'));
</script>

	</body>
</html>
